{{#if items}}
	<div class='items'>
		{{#each item in items}}
			<div class='item'>
				<div class='field'>
					{{d-button
						action='removeItem'
						actionParam=item
						icon='times'
						class='btn-small no-text df-simple'
						title='paid_membership.plan.delete'
					}}
					<div>
						<span class='label'>BBCode: </span>
						[{{input type='text' value=item.id autoresize=true}}]
					</div>
				</div>
				<div class='field'>
					<span class='label'>{{i18n 'paid_membership.plan.title'}}:</span>
					{{input value=item.title autoresize=true}}
				</div>
				<div class='field'>
					<span class='label'>Restriction Type:</span>
					{{x-select
						value=item.restrictionType
						content=restrictionTypeOptions
						optionValuePath='content.value'
						optionLabelPath='content.label'
						class='restrictionType'
					}}
				</div>
				<div class='field'>
					<div class='label'>{{i18n 'paid_membership.plan.groups_allowed'}}</div>
					{{df-user-groups type='allowed' item=item selected=item.allowedGroupIds}}
				</div>
				<div class='field'>
					<div class='label'>{{i18n 'paid_membership.plan.groups_granted'}}</div>
					{{df-user-groups type='granted' item=item selected=item.grantedGroupIds}}
				</div>
				<div class='field'>
					{{paid-membership-price-tiers plan=item items=item.priceTiers}}
				</div>
				<div class='field'>
					<div class='label'>{{i18n 'paid_membership.plan.description'}}:</div>
					{{textarea value=item.description autoresize=true rows=2 max-rows=5}}
				</div>
			</div>
		{{/each}}
	</div>
	<h4>{{i18n 'paid_membership.plan.heading_new'}}:</h4>
{{/if}}
<div class='item item-new'>
	<div class='field'>
		{{d-button
			action='addItem'
			icon='plus'
			class='btn-primary btn-small no-text'
			disabled=inputInvalid
			title='paid_membership.plan.add'
		}}
		<div><span class='label'>BBCode: </span>[{{input value=newId autoresize=true}}]</div>
	</div>
	<div class='field'>
		<div class='input'>
			<span class='label'>{{i18n 'paid_membership.plan.title'}}: </span>
			{{input value=title autoresize=true}}
		</div>
	</div>
	<div class='field'>
		<span class='label'>{{i18n 'paid_membership.plan.restriction_type_heading'}}:</span>
		{{x-select
			value=restrictionType
			content=restrictionTypeOptions
			optionValuePath='content.value'
			optionLabelPath='content.label'
			class='restrictionType'
		}}
	</div>
	{{!--
		2015-06-29
		Обратите внимание, что,
		хотя список групп нового пустого элемента предполагается пустым,
		мы всё равно устанавливаем соответствие selected=allowedGroupIds,
		чтобы установить связь между свойством allowedGroupIds компонента paid-membership-plans
		и свойством selected компонента df-user-groups.
		Такая связь позволяет нам очищать список групп
		после добавления нового элемента в список элементов
		(ведь тогда форму для нового элемента надо очистить, привести в начальное состояние).
	--}}
	<div class='field'>
		<div class='label'>{{i18n 'paid_membership.plan.groups_allowed'}}</div>
		{{df-user-groups type='allowed' selected=allowedGroupIds}}
	</div>
	<div class='field'>
		<div class='label'>{{i18n 'paid_membership.plan.groups_granted'}}</div>
		{{df-user-groups type='granted' selected=grantedGroupIds}}
	</div>
	<div class='field'>
		{{paid-membership-price-tiers items=priceTiers}}
	</div>
	<div class='field'>
		<div class='label'>{{i18n 'paid_membership.plan.description'}}:</div>
		{{textarea value=description autoresize=true rows=2 max-rows=5}}
	</div>
</div>
